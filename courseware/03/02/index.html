<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="icon" href="/image/qing_1.ico">
	<title>sastlinux</title>
	<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
	<div id="back">    
		<img src="/image/linux.jpg" height="100%" width="100%"/>    
	</div>  
	<div id="head">
		<div id="lesson">
		Sast-Linux
		</div>
		<div id="lecturer">
		讲师：林恩怜&陈润青
		</div>
	</div>
	<div id="menu">
		<ul>
			<li><a href="/">首页</a></li>
			<li><a href="#">课程</a>
				<ul>
					<li><a href="#">认识&了解</a>
						<ul>
							<li><a href="/courseware/00">历史&远程控制</a></li>
							<li><a href="/courseware/01">简单文件操作</a></li>
							<li><a href="/courseware/02">启动&引导</a></li>
							<li><a href="/courseware/03">认识shell</a></li>
						</ul>
					</li>
					<li><a href="#">文件&目录</a>
						<ul>
							<li><a href="/courseware/04">文件&目录管理</a></li>
							<li><a href="/courseware/05">命令(一般常用)</a></li>
							<li><a href="/courseware/06">文件权限</a></li>
						</ul>
					</li>
					<li><a href="#">文本流</a>
						<ul>
							<li><a href="/courseware/07">文本查阅</a></li>
							<li><a href="/courseware/08">文本匹配</a></li>
							<li><a href="/courseware/09">管道&重定向</a></li>
						</ul>
					</li>
					<li><a href="#">文件系统</a>
						<ul>
							<li><a href="/courseware/10">结构</li>
							<li><a href="/courseware/11">命令</li>
						</ul>
					</li>
					<li><a href="/courseware/12">磁盘操作</a></li>
					<li><a href="/courseware/13">进程管理</a></li>
					<li><a href="#">other重要命令</a>
						<ul>
							<li><a href="/courseware/14">软硬链接ln</a></li>
							<li><a href="/courseware/15">搜索find</a></li>
							<li><a href="/courseware/16">打包压缩tar</a></li>
							<li><a href="/courseware/17">拷贝转换dd</a></li>
						</ul>
					</li>
					<li><a href="#">开发</a>
						<ul>
							<li><a href="/courseware/18">vim</a></li>
							<li><a href="/courseware/19">gcc</a></li>
						</ul>
					</li>
					<li><a href="/courseware/20">服务器聊天</a></li>
					<li><a href="/courseware/21">单行多命令</a></li>
					<li><a href="/courseware/22">sftp文件传输</a></li>
					<li><a href="/courseware/23">结课</a></li>
				</ul>
			</li>
			<li><a href="#">下载&购买</a>
				<ul>
					<li><a href="#">ssh</a>
						<ul>
							<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank">PuTTY</a></li>
							<li><a href="http://www.netsarang.com/products/xsh_overview.html" target="_blank">Xshell</a></li>
							<li><a href="http://jaist.dl.sourceforge.net/project/filezilla/FileZilla_Client/3.14.1/FileZilla_3.14.1_win64-setup.exe" target="_blank">FileZilla</a></li>
						</ul>
					</li>
					<li><a href="#">虚拟机</a>
						<ul>
							<li><a href="https://www.virtualbox.org/" target="_blank">VirtualBox</a></li>
							<li><a href="http://www.vmware.com/" target="_blank">VMware</a></li>
						</ul>
					</li>
					<li><a href="#">云服务器</a>
						<ul>
							<li><a href="https://www.aliyun.com/" target="_blank">阿里云</a></li>
							<li><a href="https://www.qcloud.com/" target="-blank">腾讯云</a></li>
						</ul>
					</li>
					<li><a href="https://www.realvnc.com/download/viewer/" target="_blank">VNC&nbspViewer</a>
					<li><a href="http://www.diskgenius.cn/" target="_blank">DiskGenius</a>
					<li><a href="/download/man.chm">命令速查手册</a>
				</ul>
			</li>
			<li><a href="/about/01">关于</a></li>
			<li><a href="http://www.njuptsast.org/" target="_blank">Sast主页</a></li>
			<li><a href="http://linux.vbird.org/" target="_blank">鸟哥私房菜</a></li>
		</ul>
	</div>
	<div id="main" style="position: absolute; top: 180px; left: 2em; right: 2em;text-align: left; text-indent: 2em;">
	<!--文本添加处-->
		<p>内部命令和外部命令</p>
		<p>先说个变量，PATH，里面存了一个个的路径，用分号:隔开，这里的路径，是Shell搜索程序的路径，也就是你输入一个命令，Shell会按顺序在这些路径里搜索同名的可执行文件，如果存在，就会执行。</p><br>
		<img src="image/path.png"><br><br>
		<p>反过来，通过which命令可以看到命令的可执行文件所在的目录。</p><br>
		<img src="image/which.png"><br><br>
		<p>但是，很容易发现，有的命令找不到相应的可执行文件，甚至手册man也找不到这个命令，比如cd。</p><br>
		<img src="image/which_cd.png"><br><br>
		<p>这些命令，就被称为Shell的“内部命令”一些同义词，“内建命令”，“内建指令”，这些命令输入后，Shell并不是找相应的程序执行，而是自己根据命令做了一些事，通常这些事能不让别人代劳，就好像不能让别人帮你吃饭一样。</p><br>
		<p>对于cd具体说明一下，首先cd的作用是改变工作目录(当前目录)，但是系统里每个进程的工作目录是独立的，可以不同的，如果有一个程序作用是改变工作目录，就算你执行了这个程序，改变的也是那个新进程的工作目录，与Shell自己无关。</p><br>
		<img src="image/cd.png"><br><br>
		<p>那么cd到底做了什么，学过c语言的话应该比较好理解，Linux上那些程序可以说都是c语言实现的，改变当前工作目录也只是一个由Linux提供的c语言函数chdir就可以实现，也就是说，对于Shell，如果收到命令cd，就不会去产生新进程，不会去执行其他程序，只调用一个chdir函数就可以了，chdir这类是特殊的函数，叫“系统调用函数”，一般c语言的书上不会有。</p><br>
		<p>关于手册man，这些内部命令直接用man是查不到的。</p><br>
		<img src="image/man_cd.png"><br><br>
		<p>要查必需查相关SHELL的手册，比如bash的内部命令要查bash-builtins，zsh的要查zshbuiltins，man bash-builtins。</p><br>
		<img src="image/man_bash_builtins.png"><br><br>
		<p>图中六行就是bash的所有内部命令，认真看会觉得，有的命令不像内部命令，比如kill，用来杀掉某个进程，实际上用"which kill"，是可以看到有kill这个程序的。</p><br>
		<img src="image/which_kill.png"><br><br>
		<p>实际上，确实有kill程序，也确实有kill这个内部命令，这只能说Shell太强大，把不需要自己做的事情也做了，直接输入kill命令，优先调用的是内部命令kill。</p><br>
		<img src="image/kill_help.png"><br><br>
		<p>上图可以看出，直接调用kill --help和调用/bin/kill --help是不一样的，也就是说直接输入kill调用的并不是/bin/kill，而是内部命令kill，这种判断方式是比较愚蠢的，也是比较直观，但这有个更好的办法，这里介绍一个内部命令，type，用来看命令的类型，在这里就是看内部还是外部命令，如果是外部命令还会看到这个命令执行的二进制文件的路径，还有加上参数-a可以看见这个命令所有情况。</p><br>
		<img src="image/type.png"><br><br>
		<p>然后可以随便试试些内部命令的功能用法，在上图的手册页面往下滚有所有内部命令的详细说明，部分重要常用的后面会介绍。</p><br>
		<ul>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/01"></a></li>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/02"></a></li>
		</ul>
	</div>
	<div class="recordcode">
		<a href="http://www.beian.gov.cn/" title="链接至信息产业部备案管理系统" target="_blank">
		</a>
	</div>
</body>
</html>