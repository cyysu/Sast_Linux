<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="icon" href="/image/qing_1.ico">
	<title>sastlinux</title>
	<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
	<div id="back">    
		<img src="/image/linux.jpg" height="100%" width="100%"/>    
	</div>  
	<div id="head">
		<div id="lesson">
		Sast-Linux
		</div>
		<div id="lecturer">
		讲师：林恩怜&陈润青
		</div>
	</div>
	<div id="menu">
		<ul>
			<li><a href="/">首页</a></li>
			<li><a href="#">课程</a>
				<ul>
					<li><a href="#">认识&了解</a>
						<ul>
							<li><a href="/courseware/00">历史&远程控制</a></li>
							<li><a href="/courseware/01">简单文件操作</a></li>
							<li><a href="/courseware/02">启动&引导</a></li>
							<li><a href="/courseware/03">认识shell</a></li>
						</ul>
					</li>
					<li><a href="#">文件&目录</a>
						<ul>
							<li><a href="/courseware/04">文件&目录管理</a></li>
							<li><a href="/courseware/05">命令(一般常用)</a></li>
							<li><a href="/courseware/06">文件权限</a></li>
						</ul>
					</li>
					<li><a href="#">文本流</a>
						<ul>
							<li><a href="/courseware/07">文本查阅</a></li>
							<li><a href="/courseware/08">文本匹配</a></li>
							<li><a href="/courseware/09">管道&重定向</a></li>
						</ul>
					</li>
					<li><a href="#">文件系统</a>
						<ul>
							<li><a href="/courseware/10">结构</li>
							<li><a href="/courseware/11">命令</li>
						</ul>
					</li>
					<li><a href="/courseware/12">磁盘操作</a></li>
					<li><a href="/courseware/13">进程管理</a></li>
					<li><a href="#">other重要命令</a>
						<ul>
							<li><a href="/courseware/14">软硬链接ln</a></li>
							<li><a href="/courseware/15">搜索find</a></li>
							<li><a href="/courseware/16">打包压缩tar</a></li>
							<li><a href="/courseware/17">拷贝转换dd</a></li>
						</ul>
					</li>
					<li><a href="#">开发</a>
						<ul>
							<li><a href="/courseware/18">vim</a></li>
							<li><a href="/courseware/19">gcc</a></li>
						</ul>
					</li>
					<li><a href="/courseware/20">服务器聊天</a></li>
					<li><a href="/courseware/21">单行多命令</a></li>
					<li><a href="/courseware/22">sftp文件传输</a></li>
					<li><a href="/courseware/23">结课</a></li>
				</ul>
			</li>
			<li><a href="#">下载&购买</a>
				<ul>
					<li><a href="#">ssh</a>
						<ul>
							<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank">PuTTY</a></li>
							<li><a href="http://www.netsarang.com/products/xsh_overview.html" target="_blank">Xshell</a></li>
							<li><a href="http://jaist.dl.sourceforge.net/project/filezilla/FileZilla_Client/3.14.1/FileZilla_3.14.1_win64-setup.exe" target="_blank">FileZilla</a></li>
						</ul>
					</li>
					<li><a href="#">虚拟机</a>
						<ul>
							<li><a href="https://www.virtualbox.org/" target="_blank">VirtualBox</a></li>
							<li><a href="http://www.vmware.com/" target="_blank">VMware</a></li>
						</ul>
					</li>
					<li><a href="#">云服务器</a>
						<ul>
							<li><a href="https://www.aliyun.com/" target="_blank">阿里云</a></li>
							<li><a href="https://www.qcloud.com/" target="-blank">腾讯云</a></li>
						</ul>
					</li>
					<li><a href="https://www.realvnc.com/download/viewer/" target="_blank">VNC&nbspViewer</a>
					<li><a href="http://www.diskgenius.cn/" target="_blank">DiskGenius</a>
					<li><a href="/download/man.chm">命令速查手册</a>
				</ul>
			</li>
			<li><a href="/about/01">关于</a></li>
			<li><a href="http://www.njuptsast.org/" target="_blank">Sast主页</a></li>
			<li><a href="http://linux.vbird.org/" target="_blank">鸟哥私房菜</a></li>
		</ul>
	</div>
	<div id="main" style="position: absolute; top: 180px; left: 2em; right: 2em;text-align: left; text-indent: 2em;">
	<!--文本添加处-->
		<p>grep,sed,awk,找匹配的文字，这些命令都是比较强大的，尤其是组合起来，这里只讲最常用的用法和参数，多用man自学，比如嘛，有个代码源文件。</p>
		<pre>
	#include <stdio.h>
		int main(int argc, char **argv)
		{
			int i=0;
			printf("%d\n",i);
			return 0;
		}
		</pre>
		<p>放在/tmp/int.c，要找里面出现int的行，可以这样，grep "int" /tmp/int.c。</p><br>
		<img src="image/grep1.png"><br><br>
		<p>常用的参数也就三个，-H输出时带文件名，-i忽略大小写，-v是颠倒，匹配的不输出，不匹配的才输出，这三个参数自己找个文件试试。</p><br>
		<p>然后，如果懂正则表达式，sed是个很强大的东西，比如嘛，上面的输入的printf那一行不是我要的，可以用正则筛选，grep加个-e参数也可以支持正则，可以简单搜索。</p>
		<code>grep -e "\<int\>" int.c</code><br>
		<code>sed -n "/\<int\>/p" int.c</code><br><br>
		<img src="image/grep_sed.png"><br><br>
		<p>sed用法比较复杂，而且很多样，最基本的用法是，sed "/正则/操作" 文件，以上面的命令为例，p是print打印，就是把匹配的行打印一遍，至于-n，是因为sed默认会把整个文件打印一遍，加-n就不打印整个文件。</p><br>
		<img src="image/sed1.png"><br><br>
		<p>比起搜索，sed更常用于正则替换，替换是s，sed "/正则1/s/正则2/新字符串/选项" 文件，第一个/正则1/表示需要替换的行，可以不写，表示所有行都替换，最后的选项就说一个g，表示整行所有匹配正则2的字符串都替换了，没有g是只替换行里第一个匹配的。</p><br>
		<img src="image/seds.png"><br><br>
		<p>还有个sed的参数-i，表示替换后直接写入文件，而不是打印出来。</p><br>
		<img src="image/sedi.png"><br><br>
		<p>awk，这个最强大，强大到可以当成脚本语言了，但我们只学最基本的功能，就是筛选出一行字符串里的一部分，首先说个文件，/etc/passwd，这里存着每个用户的名字，id，家目录，默认Shell之类的。</p><br>
		<img src="image/passwd.png"><br><br>
		<p>然后来试试awk。</p>
		<p>awk -F ":" '{print $1,$5}' /etc/passwd</p><br>
		<img src="image/awk.png"><br><br>
		<p>-F参数表示用什么分隔字符串，默认是空格，print后面跟上要输出的字符串，$加数字表示行里的第几部分，也可以插入字符串，比如：</p>
		<p>awk -F ":" '{print "学号为",$1,"的同学是",$5}' /etc/passwd</p><br>
		<img src="image/awk2.png"><br><br>
		<p>关于单引号和双引号，其实说过了，单引号里面的特殊符号不用转义，比如这里可以改成双引号，"{print \$1,\$5}"，如果要将这些组合起来多次筛选，就需要Shell的管道，下节课介绍。</p><br>
		<ul>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/01"></a></li>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/02"></a></li>
		</ul>
	</div>
	<div class="recordcode">
		<a href="http://www.beian.gov.cn/" title="链接至信息产业部备案管理系统" target="_blank">
		</a>
	</div>
</body>
</html>