<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="icon" href="/image/qing_1.ico">
	<title>sastlinux</title>
	<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
	<div id="back">    
		<img src="/image/linux.jpg" height="100%" width="100%"/>    
	</div>  
	<div id="head">
		<div id="lesson">
		Sast-Linux
		</div>
		<div id="lecturer">
		讲师：林恩怜&陈润青
		</div>
	</div>
	<div id="menu">
		<ul>
			<li><a href="/">首页</a></li>
			<li><a href="#">课程</a>
				<ul>
					<li><a href="#">认识&了解</a>
						<ul>
							<li><a href="/courseware/00">历史&远程控制</a></li>
							<li><a href="/courseware/01">简单文件操作</a></li>
							<li><a href="/courseware/02">启动&引导</a></li>
							<li><a href="/courseware/03">认识shell</a></li>
						</ul>
					</li>
					<li><a href="#">文件&目录</a>
						<ul>
							<li><a href="/courseware/04">文件&目录管理</a></li>
							<li><a href="/courseware/05">命令(一般常用)</a></li>
							<li><a href="/courseware/06">文件权限</a></li>
						</ul>
					</li>
					<li><a href="#">文本流</a>
						<ul>
							<li><a href="/courseware/07">文本查阅</a></li>
							<li><a href="/courseware/08">文本匹配</a></li>
							<li><a href="/courseware/09">管道&重定向</a></li>
						</ul>
					</li>
					<li><a href="#">文件系统</a>
						<ul>
							<li><a href="/courseware/10">结构</li>
							<li><a href="/courseware/11">命令</li>
						</ul>
					</li>
					<li><a href="/courseware/12">磁盘操作</a></li>
					<li><a href="/courseware/13">进程管理</a></li>
					<li><a href="#">other重要命令</a>
						<ul>
							<li><a href="/courseware/14">软硬链接ln</a></li>
							<li><a href="/courseware/15">搜索find</a></li>
							<li><a href="/courseware/16">打包压缩tar</a></li>
							<li><a href="/courseware/17">拷贝转换dd</a></li>
						</ul>
					</li>
					<li><a href="#">开发</a>
						<ul>
							<li><a href="/courseware/18">vim</a></li>
							<li><a href="/courseware/19">gcc</a></li>
						</ul>
					</li>
					<li><a href="/courseware/20">服务器聊天</a></li>
					<li><a href="/courseware/21">单行多命令</a></li>
					<li><a href="/courseware/22">sftp文件传输</a></li>
					<li><a href="/courseware/23">结课</a></li>
				</ul>
			</li>
			<li><a href="#">下载&购买</a>
				<ul>
					<li><a href="#">ssh</a>
						<ul>
							<li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank">PuTTY</a></li>
							<li><a href="http://www.netsarang.com/products/xsh_overview.html" target="_blank">Xshell</a></li>
							<li><a href="http://jaist.dl.sourceforge.net/project/filezilla/FileZilla_Client/3.14.1/FileZilla_3.14.1_win64-setup.exe" target="_blank">FileZilla</a></li>
						</ul>
					</li>
					<li><a href="#">虚拟机</a>
						<ul>
							<li><a href="https://www.virtualbox.org/" target="_blank">VirtualBox</a></li>
							<li><a href="http://www.vmware.com/" target="_blank">VMware</a></li>
						</ul>
					</li>
					<li><a href="#">云服务器</a>
						<ul>
							<li><a href="https://www.aliyun.com/" target="_blank">阿里云</a></li>
							<li><a href="https://www.qcloud.com/" target="-blank">腾讯云</a></li>
						</ul>
					</li>
					<li><a href="https://www.realvnc.com/download/viewer/" target="_blank">VNC&nbspViewer</a>
					<li><a href="http://www.diskgenius.cn/" target="_blank">DiskGenius</a>
					<li><a href="/download/man.chm">命令速查手册</a>
				</ul>
			</li>
			<li><a href="/about/01">关于</a></li>
			<li><a href="http://www.njuptsast.org/" target="_blank">Sast主页</a></li>
			<li><a href="http://linux.vbird.org/" target="_blank">鸟哥私房菜</a></li>
		</ul>
	</div>
	<div id="main" style="position: absolute; top: 180px; left: 2em; right: 2em;text-align: left; text-indent: 2em;">
	<!--文本添加处-->
		<p>链接的意义，有时候有的文件我们可能希望他们的内容是一样的，当其中一个文件改变时，另一个也一样改变，也就是读取出来要完全一样，首先说一下，这东西是依赖文件系统的，Linux常用的文件系统ext支持，windows的fat不支持，ntfs在win7以后有mklink，在Linux上不支持，所以先介绍一个在ext里代表不同文件的东西，inode，inode是一个数字，一个ext分区里，所有的文件和文件夹都有且仅有一个inode，inode决定这个文件在硬盘中存储的位置，相同的inode表示文件存在硬盘的同一位置，不同的inode表示文件存在硬盘的不同位置，ls -i可以看见文件的inode。</p><br>
		<img src="image/lsi.png"><br><br>
		<p>还有个更详细的命令，也可以看到inode，stat。</p><br>
		<img src="image/stat.png"><br><br>
		<p>ln命令默认产生硬链接(hard link)。</p><br>
		<img src="image/ln.png"><br><br>
		<p>产生的硬链接和源文件没有区别，inode相同，除了都存在硬盘里的同一位置，没有从属关系，没有谁是谁的链接的关系，两者都是常规文件，两者都被删除以后，这部分数据才算是被删除了，才有可能被新的文件覆盖，要注意的是，文件夹不能建立硬链接，硬链接不能跨硬盘，跨分区，stat命令可以看出有多少个文件链接到相同的位置，正常文件的Links数目是1，就是文件本身。</p><br>
		<img src="image/lnstat.png"><br><br>
		<p>ln -s产生软链接(符号链接)(symbolic link)</p><br>
		<img src="image/lns.png"><br><br>
		<p>对软链接的读写都会作用到源文件上，这点从效果上看，和硬链接一样，但是有很大的本质不同，首先，产生的软链接和原文件是"不同"的文件，它们的inode是不同的，代表它们是存在硬盘上不同位置的文件，其次，软链接不是常规文件，文件类型那个位置写的是l，是软链接专用的文件类型，大小也和原文件无关，这种类型专门是用来指向另一个文件的，软链接文件存着对方的路径(相对绝对路径都可以，甚至存不存在都可以)，也只是简单的存一个路径，读写的时候直接读写软链接指向的文件，练习，回去做的，下图几个命令，求结果这4个文件读出来的内容，先猜一下结果，再尝试一下。</p><br>
		<img src="image/q.png"><br><br>
		<p>复制软链接，硬链接是普通文件，正常使用没问题，但软链接不同，正常复制是通过读和写，但是软链接读出来的是它指向的文件的内容，写生成的文件也只会是常规文件，因此cp命令有个参数可以用来复制软链接，但是要注意，软链接如果是相对路径，复制到其他目录后，相对路径的起点也变了。</p>
		<p>cp -l</p><br>
		<img src="image/cpl.png"><br><br>
		<p>这个参数不只可以用来复制软链接，有名管道也可以，其实cp -l和ln产生硬链接的效果是一样的。</p><br>
		<p>根据inode找文件，参数-inum后面跟上inode就可以筛选出指定inode的文件。</p><br>
		<img src="image/find.png"><br><br>
		<ul>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/01"></a></li>
			<li style="line-height: 40px; text-align: center; width: 120px; text-indent: 0em;"><a href="/courseware/00/02"></a></li>
		</ul>
	</div>
	<div class="recordcode">
		<a href="http://www.beian.gov.cn/" title="链接至信息产业部备案管理系统" target="_blank">
		</a>
	</div>
</body>
</html>